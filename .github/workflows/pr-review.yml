on:
    pull_request:
        types: [opened, reopened, ready_for_review]
    issue_comment:
        types: [created]

jobs:
    pr_agent_job:
        if: ${{ github.event.sender.type != 'Bot' }}
        runs-on: ubuntu-latest
        permissions:
            issues: write
            pull-requests: write
            contents: write
        name: Run pr agent on every pull request, respond to user comments
        steps:
        - name: PR Agent action step
          id: pragent
          uses: Codium-ai/pr-agent@main
          env:
            CONFIG.MODEL: "deepseek/deepseek-chat"
            CONFIG.MODEL_TURBO: "deepseek/deepseek-coder"
            CONFIG.CUSTOM_MODEL_MAX_TOKENS: 64000
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}